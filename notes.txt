This creates the resize listener for the window.  Throttle creates a repeating redraw timer.

This creates the zoom listener for the svg.  The move function calculates the changes for x and y and transforms the map appropriately.   scaleExtent determines the max/min you can zoom in or out.
 
 This then defines constants.  This uses a container in which it places the svg.




 These offsets are like margin left/right

 
 More constants.

 d3.geoGraticule creates the gridlines for the d3 map.


 Creating a tooltip.

 Setup creates the projection using 3.geoMercator.  Translate automatically centers the projection in the middle of the div.  Scale determines scale factor.  Not sure why we're messing with Math.PI.

 This projection can be called with latitude and longitude in order to figure out the appropriate x and y values.  This is kind of like the scales we had done before, which we can call with an argument and get the appropriate X value returned.






 path is a new geoPath, which is a geographic path generator.  When you call path, it will render the object.  Really complicated SVG draw to display the map.

This appends the sg to the container with the height/width.  It calls zoom on it, which is the zoom function from earlier.